## ⚡ API 명세서

| 구분        | 기능명             | HTTP Method | REST API                              | JWT   |
|-----------|-----------------|-------------|---------------------------------------|-------|
| 1. 회원 관리  | ~~1.1 이메일 가입~~  | ~~POST~~    | ~~/auth/register~~                    | ~~X~~ |
|           | 1.2 로그인         | POST        | /auth/login                           | X     |
|           | 1.3 로그인 갱신      | GET         | /auth/refresh                         | O     |
|           | 1.4 로그아웃        | GET         | /auth/logout                          | O     |
| 2. 게시글 관리 | 2.1 게시글 목록 조회   | GET         | /posts?search=&page=&limit=&category= | X     |
|           | 2.2 게시글 상세 조회   | GET         | /posts/:id                            | X     |
|           | 2.3 게시글 등록      | POST        | /posts                                | O     |
|           | 2.4 게시글 수정      | PATCH       | /posts/:id                            | O     |
|           | 2.5 게시글 삭제      | DELETE      | /posts/:id                            | O     |
|           | 2.6 카테고리 목록 조회  | GET         | /categories                           | X     |
|           | 2.7 카테고리 생성     | POST        | /categories                           | O     |
|           | 2.8 카테고리 수정     | PATCH       | /categories/:name                     | O     |
|           | 2.9 카테고리 삭제     | DELETE      | /categories/:name                     | O     |
|           | 2.10 게시글 좋아요    | POST        | /posts/like                           | X     |
|           | 2.11 비회원 댓글 작성  | POST        | /posts/comments/guest                 | X     |
|           | 2.12 비회원 대댓글 작성 | POST        | /posts/child-comments/guest           | X     |
|           | 2.13 비회원 댓글 수정  | PATCH       | /posts/comments/guest/:id             | X     |
|           | 2.14 비회원 댓글 삭제  | DELETE      | /posts/comments/guest/:id             | X     |
|           | 2.15 댓글 작성      | POST        | /posts/comments                       | O     |
|           | 2.16 대댓글 작성     | POST        | /posts/child-comments                 | O     |
|           | 2.17 댓글 수정      | PATCH       | /posts/comments/:id                   | O     |
|           | 2.18 댓글 삭제      | DELETE      | /posts/comments/:id                   | O     |

## ⚡ ERD 설계

> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [Blog](#blog)

## Blog

```mermaid
erDiagram
"User" {
  String id PK
  String name
  String email UK
  String password
  String description "nullable"
  String refreshToken "nullable"
}
"GuestUser" {
  String id PK
  String nickName "nullable"
  String email "nullable"
  String password "nullable"
}
"PostLike" {
  String postId FK
  String guestUserId FK
}
"Post" {
  String id PK
  String title
  String content
  DateTime createdAt
  DateTime updatedAt
  String authorId FK
  String categoryId FK "nullable"
}
"Tag" {
  String id PK
  String name UK
}
"PostTag" {
  String postId FK
  String tagId FK
}
"Image" {
  String id PK
  String url
  String postId FK
}
"Category" {
  String id PK
  String name UK
}
"Comment" {
  String id PK
  String content
  String parentCommentId FK "nullable"
  String postId FK
  String authorId FK "nullable"
  String guestUserId FK "nullable"
}
"PostLike" }o--|| "Post" : post
"PostLike" }o--|| "GuestUser" : guestUser
"Post" }o--|| "User" : author
"Post" }o--o| "Category" : category
"PostTag" }o--|| "Post" : post
"PostTag" }o--|| "Tag" : tag
"Image" }o--|| "Post" : post
"Comment" }o--o| "Comment" : parentComment
"Comment" }o--|| "Post" : posts
"Comment" }o--o| "User" : author
"Comment" }o--o| "GuestUser" : guestUser
```

### `User`

회원 테이블

**Properties**

- `id`: Pirmary Key
- `name`: 이름
- `email`: 이메일
- `password`: 비밀번호
- `description`: 간단한 소개
- `refreshToken`: refresh token

### `GuestUser`

비회원 테이블

비회원도 게시글 좋아요, 댓글 기능을 사용할 수 있도록 하는 테이블이다.

**Properties**

- `id`: Pirmary Key
- `nickName`: 닉네임
- `email`: 이메일
- `password`: 비밀번호

### `PostLike`

비회원 <=> 게시글 다대다, 게시글 좋아요 테이블

**Properties**

- `postId`
  > Foreign Key
  >
  > 게시글 ID [Post.id](#Post)
- `guestUserId`
  > Foreign Key
  >
  > 비회원 ID [GuestUser.id](#GuestUser)

### `Post`

게시글 테이블

**Properties**

- `id`: Pirmary Key
- `title`: 제목
- `content`: 내용
- `createdAt`: 생성일
- `updatedAt`: 수정일
- `authorId`
  > Foreign Key
  >
  > 작성자 ID [User.id](#User)
- `categoryId`
  > Foreign Key
  >
  > 작성자 ID [Category.id](#Category)

### `Tag`

태그 테이블

**Properties**

- `id`: Primary Key
- `name`: 태그 이름

### `PostTag`

포스트, 태그 다대다 테이블

**Properties**

- `postId`
  > Foreign Key
  >
  > 게시글 ID [Post.id](#Post)
- `tagId`
  > Foreign Key
  >
  > 태그 ID [Tag.id](#Tag)

### `Image`

이미지 테이블

**Properties**

- `id`: Pirmary Key
- `url`: 이미지 url
- `postId`
  > Foreign Key
  >
  > 게시글 ID [Post.id](#Post)

### `Category`

카테고리 테이블

**Properties**

- `id`: Primary Key
- `name`: 카테고리 이름

### `Comment`

댓글 테이블

**Properties**

- `id`: Pirmary Key
- `content`: 내용
- `parentCommentId`
  > Foreign Key
  >
  > 부모 댓글 ID [Comment.id](#Comment)
- `postId`
  > Foreign Key
  >
  > 게시글 ID [Post.id](#Post)
- `authorId`
  > Foreign Key
  >
  > 작성자(회원) ID [User.id](#User)
- `guestUserId`
  > Foreign Key
  >
  > 작성자(비회원) ID [GuestUser.id](#GuestUser)
