# ğŸŒ blog-backend

## ğŸ“Œ í”„ë¡œì íŠ¸ ì†Œê°œ

ê°œì¸ ë¸”ë¡œê·¸ ìš´ì˜(ë¸Œëœë”©)ì„ ìœ„í•œ ë°±ì—”ë“œ ì„œë²„ì…ë‹ˆë‹¤. (2024.06 ~ .)

### í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê²Œëœ ê³„ê¸°

í•™ë¶€ì—ì„œ ë‹¤ì–‘í•œ ì£¼ì œë¡œ ì—¬ëŸ¬ íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆì§€ë§Œ, ì§€ê¸ˆê¹Œì§€ ìœ ì§€ ë³´ìˆ˜ ë° ìš´ì˜í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.

ë‹¨ìˆœíˆ ì„¤ê³„ì™€ êµ¬í˜„ì—ë§Œ ì§‘ì¤‘í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¹¨ë‹«ê³ , ì „ë°˜ì ì¸ ê°œë°œ ê³¼ì •ì„ ëª¨ë‘ ê²½í—˜í•˜ë©´ì„œ, ì§€ì†ì ìœ¼ë¡œ ìš´ì˜ ë° ìœ ì§€ ë³´ìˆ˜í•  ìˆ˜ ìˆëŠ” í”„ë¡œì íŠ¸ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

### í”„ë¡œì íŠ¸ë¥¼ í†µí•œ ëª©í‘œ

1. ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜ì—ì„œ ê²ªì„ ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë¬¸ì œë¥¼ ì§ì ‘ í•´ê²°í•˜ê³  ê°œì„ í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
2. ì§€ì†ì ìœ¼ë¡œ ì½”ë“œ í’ˆì§ˆì„ ê°œì„ í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
3. ìœ„ì™€ ê°™ì€ í™œë™ì„ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ í¬íŠ¸í´ë¦¬ì˜¤ ê°•í™”ë¥¼ í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
4. ê°œì¸ ë¸Œëœë”©ì„ í†µí•´ ê°œì¸ì  ì„±ì¥ì„ ë„ëª¨í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

## ğŸ“Œ ê¸°ìˆ  ìŠ¤íƒ

![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)
![Express](https://img.shields.io/badge/Express-000000?style=for-the-badge&logo=express&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![Prisma](https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![Docker Compose](https://img.shields.io/badge/Docker_Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white)

## ğŸ“Œ Swagger ë°°í¬ ì£¼ì†Œ

- https://jongdeug.port0.org/api/docs
- username: admin
- password: 1234

## ğŸ“Œ ì•„í‚¤í…ì²˜

#### ì „ì²´ì ì¸ ì„œë¹„ìŠ¤ êµ¬ì¡°
![app.png](public/app.png)

#### ë°±ì—”ë“œ êµ¬ì¡°
![back-end.png](public/back-end.png)

[//]: # (## ğŸ“Œ ê¸°íƒ€ ì¶”ê°€ ì‚¬í•­ë“¤)

[//]: # (## ğŸ“Œ í™”ë©´ êµ¬ì„±/API ì£¼ì†Œ)

## ğŸ“Œ ê¸°ëŠ¥ ë¦¬ìŠ¤íŠ¸

| êµ¬ë¶„        | ê¸°ëŠ¥ëª…             | ì¶”ê°€ ê¸°ëŠ¥              | ì„¤ëª…                                                    |
|-----------|-----------------|--------------------|-------------------------------------------------------|
| 1. íšŒì› ê´€ë¦¬  | ~~1.1 ì´ë©”ì¼ ê°€ì…~~  |                    |                                                       |
|           | 1.2 ë¡œê·¸ì¸         |                    |                                                       |
|           | 1.3 ì¸ì¦ ê°±ì‹        |                    | refreshToken ì„ ê°€ì§€ê³  accessToken ì™€ refreshToken ì„ ê°±ì‹ í•œë‹¤. |
|           | 1.4 ë¡œê·¸ì•„ì›ƒ        |                    |                                                       |
| 2. ê²Œì‹œíŒ ê´€ë¦¬ | 2.1 ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ   | 2.1.1 ê²Œì‹œê¸€ ê²€ìƒ‰       | ê²€ìƒ‰ì–´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ê²Œì‹œê¸€ ëª©ë¡ì„ ë³¼ ìˆ˜ ìˆë‹¤.                          |
|           |                 | 2.1.2 í˜ì´ì§€ë„¤ì´ì…˜       | page, limit ë³€ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²Œì‹œê¸€ ëª©ë¡ì„ ë‚˜ëˆ ì„œ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.           |
|           |                 | 2.1.3 ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰     | ì¹´í…Œê³ ë¦¬(í´ë”)ë³„ë¡œ ê²Œì‹œê¸€ì„ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.                         |
|           | 2.2 ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ   | 2.2.1 ëŒ“ê¸€ ì¡°íšŒ        | ê²Œì‹œê¸€ì˜ ëŒ“ê¸€ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.                                    |
|           | 2.3 ê²Œì‹œê¸€ ë“±ë¡      | 2.3.1 ì¹´í…Œê³ ë¦¬ ë° íƒœê·¸ ì‘ì„± |                                                       |
|           | 2.4 ê²Œì‹œê¸€ ìˆ˜ì •      |                    |                                                       |
|           | 2.5 ê²Œì‹œê¸€ ì‚­ì œ      |                    |                                                       |
|           | 2.6 ì¹´í…Œê³ ë¦¬ ëª©ë¡ ì¡°íšŒ  |                    |                                                       |
|           | 2.7 ì¹´í…Œê³ ë¦¬ ìƒì„±     |                    |                                                       |
|           | 2.8 ì¹´í…Œê³ ë¦¬ ìˆ˜ì •     |                    |                                                       |
|           | 2.9 ì¹´í…Œê³ ë¦¬ ì‚­ì œ     |                    |                                                       |
|           | 2.10 ê²Œì‹œê¸€ ì¢‹ì•„ìš”    |                    |                                                       |
|           | 2.11 ë¹„íšŒì› ëŒ“ê¸€ ì‘ì„±  |                    |                                                       |
|           | 2.12 ë¹„íšŒì› ëŒ€ëŒ“ê¸€ ì‘ì„± |                    |                                                       |
|           | 2.13 ë¹„íšŒì› ëŒ“ê¸€ ìˆ˜ì •  |                    |                                                       |
|           | 2.14 ë¹„íšŒì› ëŒ“ê¸€ ì‚­ì œ  |                    |                                                       |
|           | 2.15 ëŒ“ê¸€ ì‘ì„±      |                    |                                                       |
|           | 2.16 ëŒ€ëŒ“ê¸€ ì‘ì„±     |                    |                                                       |
|           | 2.17 ëŒ“ê¸€ ìˆ˜ì •      |                    |                                                       |
|           | 2.18 ëŒ“ê¸€ ì‚­ì œ      |                    |                                                       |
|           | 2.19 ì´ë¯¸ì§€ ì—…ë¡œë“œ    |                    |                                                       |

## ğŸ“Œ ì„¤ê³„ ëª…ì„¸ì„œ

### âš¡ API ëª…ì„¸ì„œ

| êµ¬ë¶„        | ê¸°ëŠ¥ëª…             | HTTP Method | REST API                              | JWT   |
|-----------|-----------------|-------------|---------------------------------------|-------|
| 1. íšŒì› ê´€ë¦¬  | ~~1.1 ì´ë©”ì¼ ê°€ì…~~  | ~~POST~~    | ~~/auth/register~~                    | ~~X~~ |
|           | 1.2 ë¡œê·¸ì¸         | POST        | /auth/login                           | X     |
|           | 1.3 ë¡œê·¸ì¸ ê°±ì‹       | GET         | /auth/refresh                         | O     |
|           | 1.4 ë¡œê·¸ì•„ì›ƒ        | GET         | /auth/logout                          | O     |
| 2. ê²Œì‹œê¸€ ê´€ë¦¬ | 2.1 ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ   | GET         | /posts?search=&page=&limit=&category= | X     |
|           | 2.2 ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ   | GET         | /posts/:id?guestLikeId=               | X     |
|           | 2.3 ê²Œì‹œê¸€ ë“±ë¡      | POST        | /posts                                | O     |
|           | 2.4 ê²Œì‹œê¸€ ìˆ˜ì •      | PATCH       | /posts/:id                            | O     |
|           | 2.5 ê²Œì‹œê¸€ ì‚­ì œ      | DELETE      | /posts/:id                            | O     |
|           | 2.6 ì¹´í…Œê³ ë¦¬ ëª©ë¡ ì¡°íšŒ  | GET         | /categories                           | X     |
|           | 2.7 ì¹´í…Œê³ ë¦¬ ìƒì„±     | POST        | /categories                           | O     |
|           | 2.8 ì¹´í…Œê³ ë¦¬ ìˆ˜ì •     | PATCH       | /categories/:name                     | O     |
|           | 2.9 ì¹´í…Œê³ ë¦¬ ì‚­ì œ     | DELETE      | /categories/:name                     | O     |
|           | 2.10 ê²Œì‹œê¸€ ì¢‹ì•„ìš”    | POST        | /posts/like                           | X     |
|           | 2.11 ë¹„íšŒì› ëŒ“ê¸€ ì‘ì„±  | POST        | /posts/comments/guest                 | X     |
|           | 2.12 ë¹„íšŒì› ëŒ€ëŒ“ê¸€ ì‘ì„± | POST        | /posts/child-comments/guest           | X     |
|           | 2.13 ë¹„íšŒì› ëŒ“ê¸€ ìˆ˜ì •  | PATCH       | /posts/comments/guest/:id             | X     |
|           | 2.14 ë¹„íšŒì› ëŒ“ê¸€ ì‚­ì œ  | DELETE      | /posts/comments/guest/:id             | X     |
|           | 2.15 ëŒ“ê¸€ ì‘ì„±      | POST        | /posts/comments                       | O     |
|           | 2.16 ëŒ€ëŒ“ê¸€ ì‘ì„±     | POST        | /posts/child-comments                 | O     |
|           | 2.17 ëŒ“ê¸€ ìˆ˜ì •      | PATCH       | /posts/comments/:id                   | O     |
|           | 2.18 ëŒ“ê¸€ ì‚­ì œ      | DELETE      | /posts/comments/:id                   | O     |
|           | 2.19 ì´ë¯¸ì§€ ì—…ë¡œë“œ    | POST        | /posts/upload                         | O     |

### âš¡ ERD ì„¤ê³„

# ë¸”ë¡œê·¸ í”„ë¡œì íŠ¸ ERD

> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [Blog](#blog)

## Blog

```mermaid
erDiagram
"User" {
  String id PK
  String name
  String email UK
  String password
  String description "nullable"
  Int role
  String refreshToken "nullable"
}
"GuestLike" {
  String id PK
}
"GuestComment" {
  String id PK
  String nickName
  String email
  String password
}
"PostLike" {
  String postId FK
  String guestId FK
}
"Post" {
  String id PK
  String title
  String content
  DateTime createdAt
  DateTime updatedAt
  String prev "nullable"
  String next "nullable"
  Boolean draft
  String authorId FK
  String categoryName FK
}
"Tag" {
  String name PK
}
"PostTag" {
  String postId FK
  String tagId FK
}
"Image" {
  String id PK
  String url
  String postId FK
}
"Category" {
  String name PK
}
"Comment" {
  String id PK
  String content
  String parentCommentId FK "nullable"
  String postId FK
  String authorId FK "nullable"
  String guestId FK "nullable"
}
"PostLike" }o--|| "Post" : post
"PostLike" }o--|| "GuestLike" : guest
"Post" }o--|| "User" : author
"Post" }o--|| "Category" : category
"PostTag" }o--|| "Post" : post
"PostTag" }o--|| "Tag" : tag
"Image" }o--|| "Post" : post
"Comment" }o--o| "Comment" : parentComment
"Comment" }o--|| "Post" : post
"Comment" }o--o| "User" : author
"Comment" |o--o| "GuestComment" : guest
```

### `User`

íšŒì› í…Œì´ë¸”

**Properties**

- `id`: Pirmary Key
- `name`: ì´ë¦„
- `email`: ì´ë©”ì¼
- `password`: ë¹„ë°€ë²ˆí˜¸
- `description`: ê°„ë‹¨í•œ ì†Œê°œ
- `role`: ì—­í• 
- `refreshToken`: refresh token

### `GuestLike`

ë¹„íšŒì› ì¢‹ì•„ìš” í…Œì´ë¸”

**Properties**

- `id`: Pirmary Key

### `GuestComment`

ë¹„íšŒì› ëŒ“ê¸€ í…Œì´ë¸”

**Properties**

- `id`: Pirmary Key
- `nickName`: ë‹‰ë„¤ì„
- `email`: ì´ë©”ì¼
- `password`: ë¹„ë°€ë²ˆí˜¸

### `PostLike`

ë¹„íšŒì› <=> ê²Œì‹œê¸€ : ë‹¤ëŒ€ë‹¤, ê²Œì‹œê¸€ ì¢‹ì•„ìš” í…Œì´ë¸”

**Properties**

- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)
- `guestId`
  > Foreign Key
  >
  > ë¹„íšŒì› ID [GuestLike.id](#GuestLike)

### `Post`

ê²Œì‹œê¸€ í…Œì´ë¸”

**Properties**

- `id`: Pirmary Key
- `title`: ì œëª©
- `content`: ë‚´ìš©
- `createdAt`: ìƒì„±ì¼
- `updatedAt`: ìˆ˜ì •ì¼
- `prev`: ì´ì „ ê²Œì‹œê¸€ id
- `next`: ë‹¤ìŒ ê²Œì‹œê¸€ id
- `draft`: ì´ˆì•ˆ
- `authorId`
  > Foreign Key
  >
  > ì‘ì„±ì ID [User.id](#User)
- `categoryName`
  > Foreign Key
  >
  > ì‘ì„±ì ID [Category.id](#Category)

### `Tag`

íƒœê·¸ í…Œì´ë¸”

**Properties**

- `name`: Primary Key, íƒœê·¸ ì´ë¦„

### `PostTag`

í¬ìŠ¤íŠ¸, íƒœê·¸ ë‹¤ëŒ€ë‹¤ í…Œì´ë¸”

**Properties**

- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)
- `tagId`
  > Foreign Key
  >
  > íƒœê·¸ ID [Tag.id](#Tag)

### `Image`

ì´ë¯¸ì§€ í…Œì´ë¸”

**Properties**

- `id`: Pirmary Key
- `url`: ì´ë¯¸ì§€ url
- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)

### `Category`

ì¹´í…Œê³ ë¦¬ í…Œì´ë¸”

**Properties**

- `name`: Primary Key, ì¹´í…Œê³ ë¦¬ ì´ë¦„

### `Comment`

ëŒ“ê¸€ í…Œì´ë¸”

**Properties**

- `id`: Pirmary Key
- `content`: ë‚´ìš©
- `parentCommentId`
  > Foreign Key
  >
  > ë¶€ëª¨ ëŒ“ê¸€ ID [Comment.id](#Comment)
- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)
- `authorId`
  > Foreign Key
  >
  > ì‘ì„±ì(íšŒì›) ID [User.id](#User)
- `guestId`
  > Foreign Key
  >
  > ì‘ì„±ì(ë¹„íšŒì›) ID [GuestComment.id](#GuestComment)
