# ğŸŒ blog-backend

## ğŸ“Œ í”„ë¡œì íŠ¸ ì†Œê°œ

ê¸°ê°„: (2024.06 ~ .)

### ê³„ê¸°

í•™ë¶€ì—ì„œ ë‹¤ì–‘í•œ ì£¼ì œë¡œ ì—¬ëŸ¬ íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆì§€ë§Œ, ìš´ì˜ ë° ìœ ì§€ ë³´ìˆ˜ë¥¼ í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ì„¤ê³„ì™€ êµ¬í˜„ì—ë§Œ ì§‘ì¤‘í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¹¨ë‹«ê³ , ì „ë°˜ì ì¸ ê°œë°œ ê³¼ì •ì„ ëª¨ë‘ ê²½í—˜í•˜ë©´ì„œ, ì§€ì†ì ìœ¼ë¡œ ìš´ì˜ ë° ìœ ì§€ ë³´ìˆ˜í•  ìˆ˜ ìˆëŠ” í”„ë¡œì íŠ¸ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

### ëª©í‘œ

1. ì†Œê·œëª¨ í”„ë¡œì íŠ¸ì§€ë§Œ ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜ ê²½í—˜ ë° ë¬¸ì œ ê°œì„ 
2. ì§€ì†ì ì¸ ì½”ë“œ í’ˆì§ˆ ê°œì„ 
3. í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ê°•í™”
4. ê°œì¸ ë¸Œëœë”©ì„ í†µí•œ ê°€ì¹˜ í–¥ìƒ

## ğŸ“Œ ë§í¬

#### í”„ë¡œì íŠ¸ ë°°í¬ ì£¼ì†Œ

https://jongdeug.port0.org/

#### Trouble Shooting ê¸°ë¡

https://github.com/users/JongDeug/projects/9/views/3

#### ê¸°ëŠ¥ ê°œë°œ ê¸°ë¡

https://github.com/users/JongDeug/projects/9/views/1

#### Swagger ë°°í¬ ì£¼ì†Œ

https://jongdeug.port0.org/api/docs

## ğŸ“Œ ê¸°ìˆ  ìŠ¤íƒ

### v2

[![Nest.js](https://img.shields.io/badge/Nest.js-E0234E?style=for-the-badge&logo=nestjs&logoColor=white)](https://nestjs.com/)
[![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)](https://nodejs.org/)
[![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![Prisma](https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white)](https://www.prisma.io/)
[![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://www.docker.com/)
[![Docker Compose](https://img.shields.io/badge/Docker_Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://docs.docker.com/compose/)

### v1

[![Express](https://img.shields.io/badge/Express-000000?style=for-the-badge&logo=express&logoColor=white)](https://expressjs.com/)
[![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)](https://nodejs.org/)
[![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![Prisma](https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white)](https://www.prisma.io/)
[![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)](https://redis.io/)
[![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://www.docker.com/)
[![Docker Compose](https://img.shields.io/badge/Docker_Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://docs.docker.com/compose/)

## ğŸ“Œ ì•„í‚¤í…ì²˜

#### ì „ì²´ì ì¸ ì„œë¹„ìŠ¤ êµ¬ì¡°

![image](https://github.com/user-attachments/assets/7242ee85-c15a-41a7-a556-57b10cbd902c)

[//]: # '## ğŸ“Œ ê¸°íƒ€ ì¶”ê°€ ì‚¬í•­ë“¤'
[//]: # '## ğŸ“Œ í™”ë©´ êµ¬ì„±/API ì£¼ì†Œ'

## ğŸ“Œ ê¸°ëŠ¥ ê°œì„ 

## ğŸ“Œ ì„¤ê³„ ëª…ì„¸ì„œ

### âš¡ API ëª…ì„¸ì„œ

| êµ¬ë¶„           | ê¸°ëŠ¥ëª…                  | HTTP Method | REST API                                   | JWT | ROLE(í•˜ìœ„ ë²”ì£¼) |
| -------------- | ----------------------- | ----------- | ------------------------------------------ | --- | --------------- |
| 1. íšŒì› ê´€ë¦¬   | 1.1 ì´ë©”ì¼ ê°€ì…         | POST        | /auth/register                             | X   | ALL             |
|                | 1.2 ë¡œê·¸ì¸              | POST        | /auth/login                                | X   | ALL             |
|                | 1.3 ë¡œê·¸ì•„ì›ƒ            | GET         | /auth/logout                               | O   | USER            |
|                | 1.4 ë¡œê·¸ì¸ ê°±ì‹          | GET         | /auth/token/refresh                        | O   | USER            |
|                | 1.5 í† í° ë¬´íš¨í™”         | GET         | /auth/token/revoke/:id                     | O   | ADMIN           |
|                | 1.6 ìœ ì € ëª©ë¡ ì¡°íšŒ      | GET         | /user                                      | O   | ADMIN           |
|                | 1.7 ìœ ì € ìƒì„¸ ì¡°íšŒ      | GET         | /user/:id                                  | O   | ADMIN           |
|                | 1.8 ìœ ì € ì‚­ì œ           | DELETE      | /user/:id                                  | O   | ADMIN           |
| 2. ê²Œì‹œê¸€ ê´€ë¦¬ | 2.1 ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ    | GET         | /post?search=&take=&draft=&cursor=&order[] | X   | ALL             |
|                | 2.2 ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ    | GET         | /post/:id                                  | X   | ALL             |
|                | 2.3 ê²Œì‹œê¸€ ë“±ë¡         | POST        | /post                                      | O   | ADMIN           |
|                | 2.4 ê²Œì‹œê¸€ ìˆ˜ì •         | PATCH       | /post/:id                                  | O   | ADMIN           |
|                | 2.5 ê²Œì‹œê¸€ ì‚­ì œ         | DELETE      | /post/:id                                  | O   | ADMIN           |
|                | 2.6 ê²Œì‹œê¸€ ì¢‹ì•„ìš”       | POST        | /post/like/:id                             | X   | ALL             |
|                | 2.7 ì´ë¯¸ì§€ ì—…ë¡œë“œ       | POST        | /common/image                              | O   | ADMIN           |
|                | 2.8 íƒœê·¸ ëª©ë¡ ì¡°íšŒ      | GET         | /tag                                       | X   | ALL             |
|                | 2.9 íƒœê·¸ ìƒì„¸ ì¡°íšŒ      | GET         | /tag/:id                                   | X   | ALL             |
|                | 2.10 íƒœê·¸ ìƒì„±          | POST        | /tag                                       | O   | ADMIN           |
|                | 2.11 íƒœê·¸ ìˆ˜ì •          | PATCH       | /tag/:id                                   | O   | ADMIN           |
|                | 2.12 íƒœê·¸ ì‚­ì œ          | DELETE      | /tag/:id                                   | O   | ADMIN           |
|                | 2.13 ì¹´í…Œê³ ë¦¬ ëª©ë¡ ì¡°íšŒ | GET         | /category                                  | X   | ALL             |
|                | 2.14 ì¹´í…Œê³ ë¦¬ ìƒì„¸ ì¡°íšŒ | GET         | /category/:id                              | X   | ALL             |
|                | 2.15 ì¹´í…Œê³ ë¦¬ ìƒì„±      | POST        | /category                                  | O   | ADMIN           |
|                | 2.16 ì¹´í…Œê³ ë¦¬ ìˆ˜ì •      | PATCH       | /category/:id                              | O   | ADMIN           |
|                | 2.17 ì¹´í…Œê³ ë¦¬ ì‚­ì œ      | DELETE      | /category/:id                              | O   | ADMIN           |
|                | 2.18 ëŒ“ê¸€ ì‘ì„±(íšŒì›)    | POST        | /post/comment/user                         | O   | USER            |
|                | 2.19 ëŒ“ê¸€ ìˆ˜ì •(íšŒì›)    | PATCH       | /post/comment/user/:id                     | O   | USER            |
|                | 2.20 ëŒ“ê¸€ ì‚­ì œ(íšŒì›)    | DELETE      | /post/comment/user/:id                     | O   | USER            |
|                | 2.21 ëŒ“ê¸€ ì‘ì„±(ë¹„íšŒì›)  | POST        | /post/comment/guest                        | X   | ALL             |
|                | 2.22 ëŒ“ê¸€ ìˆ˜ì •(ë¹„íšŒì›)  | PATCH       | /post/comment/guest/:id                    | X   | ALL             |
|                | 2.23 ëŒ“ê¸€ ì‚­ì œ(ë¹„íšŒì›)  | DELETE      | /post/comment/guest/:id                    | X   | ALL             |

### âš¡ ERD ì„¤ê³„

```mermaid
erDiagram
"GuestComment" {
  Int id PK
  String nickName
  String email
  String password
  String guestId FK
}
"Guest" {
  Int id PK
  String guestId UK
}
"Category" {
  Int id PK
  String name UK
  DateTime createdAt
  DateTime updatedAt
}
"Comment" {
  Int id PK
  String content
  DateTime createdAt
  DateTime updatedAt
  Int parentCommentId FK "nullable"
  Int postId FK
  Int authorId FK "nullable"
  Int guestId FK "nullable"
}
"Image" {
  Int id PK
  String url
  Int postId FK
}
"PostLike" {
  Int postId FK
  String guestId FK
  DateTime createdAt
}
"Post" {
  Int id PK
  String title UK
  String content
  DateTime createdAt
  DateTime updatedAt
  Int prevId "nullable"
  Int nextId "nullable"
  Boolean draft
  String summary
  Int authorId FK
  Int categoryId FK
}
"Tag" {
  Int id PK
  String name UK
}
"User" {
  Int id PK
  String name
  String email UK
  String password
  Role role
  DateTime createdAt
}
"_PostToTag" {
  String A FK
  String B FK
}
"GuestComment" }o--|| "Guest" : guest
"Comment" }o--o| "Comment" : parentComment
"Comment" }o--|| "Post" : post
"Comment" }o--o| "User" : author
"Comment" |o--o| "GuestComment" : guest
"Image" }o--|| "Post" : post
"PostLike" }o--|| "Post" : post
"PostLike" }o--|| "Guest" : guest
"Post" }o--|| "User" : author
"Post" }o--|| "Category" : category
"_PostToTag" }o--|| "Post" : Post
"_PostToTag" }o--|| "Tag" : Tag
```

### `GuestComment`

ë¹„íšŒì› ëŒ“ê¸€ í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `nickName`: ë‹‰ë„¤ì„
- `email`: ì´ë©”ì¼
- `password`: ë¹„ë°€ë²ˆí˜¸(í•´ì‹œê°’)
- `guestId`
  > Foreign Key
  >
  > ì‘ì„±ì(ë¹„íšŒì›) ID [Guest.guestId](#Guest)

### `Guest`

ë¹„íšŒì› í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `guestId`: ë¹„íšŒì› id, í”„ë¡ íŠ¸ì—ì„œ ìƒì„±

### `Category`

ì¹´í…Œê³ ë¦¬ í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `name`: ì¹´í…Œê³ ë¦¬ ì´ë¦„
- `createdAt`: ìƒì„±ì¼
- `updatedAt`: ìˆ˜ì •ì¼

### `Comment`

ëŒ“ê¸€ í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `content`: ë‚´ìš©
- `createdAt`: ìƒì„±ì¼
- `updatedAt`: ìˆ˜ì •ì¼
- `parentCommentId`
  > Foreign Key
  >
  > ë¶€ëª¨ ëŒ“ê¸€ ID [Comment.id](#Comment)
- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)
- `authorId`
  > Foreign Key
  >
  > ì‘ì„±ì(íšŒì›) ID [User.id](#User)
- `guestId`
  > Foreign Key
  >
  > ì‘ì„±ì(ë¹„íšŒì›) ID [GuestComment.id](#GuestComment)

### `Image`

ì´ë¯¸ì§€ í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `url`: ì´ë¯¸ì§€ url
- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)

### `PostLike`

ë¹„íšŒì› <=> ê²Œì‹œê¸€ : ë‹¤ëŒ€ë‹¤, ê²Œì‹œê¸€ ì¢‹ì•„ìš” í…Œì´ë¸”

**Properties**

- `postId`
  > Foreign Key
  >
  > ê²Œì‹œê¸€ ID [Post.id](#Post)
- `guestId`
  > Foreign Key
  >
  > ë¹„íšŒì› ID [Guest.guestId](#Guest)
- `createdAt`: ì¢‹ì•„ìš”ê°€ ëˆŒë¦° ë‚ ì§œ

### `Post`

ê²Œì‹œê¸€ í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `title`: ì œëª©
- `content`: ë‚´ìš©
- `createdAt`: ìƒì„±ì¼
- `updatedAt`: ìˆ˜ì •ì¼
- `prevId`: ì´ì „ ê²Œì‹œê¸€ Id
- `nextId`: ë‹¤ìŒ ê²Œì‹œê¸€ Id
- `draft`: ì´ˆì•ˆ
- `summary`: ë‚´ìš© ìš”ì•½
- `authorId`
  > Foreign Key
  >
  > ì‘ì„±ì ID [User.id](#User)
- `categoryId`
  > Foreign Key
  >
  > ì‘ì„±ì ID [Category.id](#Category)

### `Tag`

íƒœê·¸ í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `name`: íƒœê·¸ ì´ë¦„

### `User`

íšŒì› í…Œì´ë¸”

**Properties**

- `id`: Primary Key
- `name`: ì´ë¦„
- `email`: ì´ë©”ì¼
- `password`: ë¹„ë°€ë²ˆí˜¸(í•´ì‹œê°’)
- `role`: ì—­í• 
- `createdAt`: ìƒì„±ì¼

### `_PostToTag`

Pair relationship table between [Post](#Post) and [Tag](#Tag)

**Properties**

- `A`:
- `B`:
